###############
# LIVING ROOM #
###############

- alias: Double click toggle sofa lights
  trigger:
    platform: event
    event_type: click
    event_data:
      entity_id: binary_sensor.switch_158d0001245482
      click_type: double
  action:
    service: light.toggle
    data:
      entity_id: light.sofa_lights

- alias: Single click toggle TV lights
  trigger:
    platform: event
    event_type: click
    event_data:
      entity_id: binary_sensor.switch_158d0001245482
      click_type: single
  action:
    service: light.toggle
    data:
      entity_id: light.tv_lights


###########
# KITCHEN #
###########

- alias: Long press toggle kitchen lights
  trigger:
    platform: event
    event_type: click
    event_data:
      entity_id: binary_sensor.switch_158d0001245482
      click_type: long_click_press
  action:
    service: light.toggle
    data:
      entity_id: light.kitchen_lights


###########
# BEDROOM #
###########

- alias: Shake cube toggle lights
  trigger:
    platform: event
    event_type: cube_action
    event_data:
      entity_id: binary_sensor.cube_158d00010f0603
      action_type: shake_air
  action:
    service: light.toggle
    entity_id: light.bed_lights

- alias: Tap twice with cube turn on light (white, 100%)
  trigger:
    platform: event
    event_type: cube_action
    event_data:
      entity_id: binary_sensor.cube_158d00010f0603
      action_type: tap_twice
  action:
    service: light.turn_on
    entity_id: light.bed_lights
    data:
      brightness: 255
      rgb_color: [255,255,255]

- alias: flip180 cube turn on light (orange, 30%)
  trigger:
    platform: event
    event_type: cube_action
    event_data:
      entity_id: binary_sensor.cube_158d00010f0603
      action_type: flip180
  action:
    service: light.turn_on
    entity_id: light.bed_lights
    data:
      brightness: 76
      rgb_color: [255,165,0]

- alias: flip90 cube toggle desk light
  trigger:
    platform: event
    event_type: cube_action
    event_data:
      entity_id: binary_sensor.cube_158d00010f0603
      action_type: flip90
  action:
    service: light.toggle
    entity_id: light.ludovics_desk

- alias: Single click toggle bedroom lights
  trigger:
    platform: event
    event_type: click
    event_data:
      entity_id: binary_sensor.switch_158d000121d17f
      click_type: single
  action:
    service: light.toggle
    data:
      entity_id: light.bed_lights

- alias: Double click toggle shower room lights
  trigger:
    platform: event
    event_type: click
    event_data:
      entity_id: binary_sensor.switch_158d000121d17f
      click_type: double
  action:
    service: light.toggle
    data:
      entity_id: light.shower_room

- alias: Motion detected turn on shower room light
  trigger:
    platform: state
    entity_id: binary_sensor.motion_sensor_158d0001db53b2
    from: 'off'
    to: 'on'
  action:
    service: light.turn_on
    data:
      entity_id: light.shower_room

- alias: No motion for 5 minutes turn off shower room light
  trigger:
    platform: state
    entity_id: binary_sensor.motion_sensor_158d0001db53b2
    from: 'on'
    to: 'off'
    for:
      minutes: 5
  action:
    service: light.turn_off
    data:
      entity_id: light.shower_room


##############
# FRONT DOOR #
##############

- alias: Notify when door opened
  trigger:
    platform: state
    entity_id: binary_sensor.door_window_sensor_158d00012153cf
    from: 'off'
    to: 'on'
  action:
    - service: notify.telegram
      data:
        message: 'He did not hold the door'
    - service: notify.telegram_admin
      data:
        message: "The door has been opened"
        data:
          photo:
            - file: !secret file_path_camera
              caption: 'The door has been opened'

- alias: Notify if door opened too long
  trigger:
    platform: state
    entity_id: binary_sensor.door_window_sensor_158d00012153cf
    from: 'off'
    to: 'on'
    for:
      minutes: 10
  action:
    service: notify.telegram
    data:
      message: 'WARNING: The front door has been opened for 10 minutes'
